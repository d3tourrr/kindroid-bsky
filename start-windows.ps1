# I hate this
$windowsToIanaMap = @{
    "Dateline Standard Time" = "Etc/GMT+12"
    "UTC-11" = "Etc/GMT+11"
    "Samoa Standard Time" = "Pacific/Apia"
    "Hawaiian Standard Time" = "Pacific/Honolulu"
    "Alaskan Standard Time" = "America/Anchorage"
    "Pacific Standard Time (Mexico)" = "America/Tijuana"
    "Pacific Standard Time" = "America/Los_Angeles"
    "US Mountain Standard Time" = "America/Phoenix"
    "Mountain Standard Time (Mexico)" = "America/Chihuahua"
    "Mountain Standard Time" = "America/Denver"
    "Central America Standard Time" = "America/Guatemala"
    "Central Standard Time" = "America/Chicago"
    "Central Standard Time (Mexico)" = "America/Mexico_City"
    "Canada Central Standard Time" = "America/Regina"
    "SA Pacific Standard Time" = "America/Bogota"
    "Eastern Standard Time" = "America/New_York"
    "US Eastern Standard Time" = "America/Indianapolis"
    "Venezuela Standard Time" = "America/Caracas"
    "Paraguay Standard Time" = "America/Asuncion"
    "Atlantic Standard Time" = "America/Halifax"
    "Central Brazilian Standard Time" = "America/Cuiaba"
    "SA Western Standard Time" = "America/La_Paz"
    "Pacific SA Standard Time" = "America/Santiago"
    "Newfoundland Standard Time" = "America/St_Johns"
    "E. South America Standard Time" = "America/Sao_Paulo"
    "Argentina Standard Time" = "America/Buenos_Aires"
    "SA Eastern Standard Time" = "America/Cayenne"
    "Greenland Standard Time" = "America/Godthab"
    "Montevideo Standard Time" = "America/Montevideo"
    "UTC-02" = "Etc/GMT+2"
    "Mid-Atlantic Standard Time" = "Atlantic/South_Georgia"
    "Azores Standard Time" = "Atlantic/Azores"
    "Cape Verde Standard Time" = "Atlantic/Cape_Verde"
    "Morocco Standard Time" = "Africa/Casablanca"
    "UTC" = "Etc/UTC"
    "GMT Standard Time" = "Europe/London"
    "Greenwich Standard Time" = "Atlantic/Reykjavik"
    "W. Europe Standard Time" = "Europe/Berlin"
    "Central Europe Standard Time" = "Europe/Budapest"
    "Romance Standard Time" = "Europe/Paris"
    "Central European Standard Time" = "Europe/Warsaw"
    "W. Central Africa Standard Time" = "Africa/Lagos"
    "Namibia Standard Time" = "Africa/Windhoek"
    "Jordan Standard Time" = "Asia/Amman"
    "GTB Standard Time" = "Europe/Bucharest"
    "Middle East Standard Time" = "Asia/Beirut"
    "Egypt Standard Time" = "Africa/Cairo"
    "Syria Standard Time" = "Asia/Damascus"
    "E. Europe Standard Time" = "Europe/Chisinau"
    "South Africa Standard Time" = "Africa/Johannesburg"
    "FLE Standard Time" = "Europe/Kiev"
    "Turkey Standard Time" = "Europe/Istanbul"
    "Israel Standard Time" = "Asia/Jerusalem"
    "Kaliningrad Standard Time" = "Europe/Kaliningrad"
    "Libya Standard Time" = "Africa/Tripoli"
    "Arabic Standard Time" = "Asia/Baghdad"
    "Arab Standard Time" = "Asia/Riyadh"
    "Belarus Standard Time" = "Europe/Minsk"
    "Russian Standard Time" = "Europe/Moscow"
    "E. Africa Standard Time" = "Africa/Nairobi"
    "Iran Standard Time" = "Asia/Tehran"
    "Arabian Standard Time" = "Asia/Dubai"
    "Azerbaijan Standard Time" = "Asia/Baku"
    "Mauritius Standard Time" = "Indian/Mauritius"
    "Georgian Standard Time" = "Asia/Tbilisi"
    "Caucasus Standard Time" = "Asia/Yerevan"
    "Afghanistan Standard Time" = "Asia/Kabul"
    "West Asia Standard Time" = "Asia/Tashkent"
    "Pakistan Standard Time" = "Asia/Karachi"
    "India Standard Time" = "Asia/Kolkata"
    "Sri Lanka Standard Time" = "Asia/Colombo"
    "Nepal Standard Time" = "Asia/Kathmandu"
    "Central Asia Standard Time" = "Asia/Almaty"
    "Bangladesh Standard Time" = "Asia/Dhaka"
    "Ekaterinburg Standard Time" = "Asia/Yekaterinburg"
    "Myanmar Standard Time" = "Asia/Yangon"
    "SE Asia Standard Time" = "Asia/Bangkok"
    "N. Central Asia Standard Time" = "Asia/Novosibirsk"
    "China Standard Time" = "Asia/Shanghai"
    "North Asia Standard Time" = "Asia/Krasnoyarsk"
    "Singapore Standard Time" = "Asia/Singapore"
    "W. Australia Standard Time" = "Australia/Perth"
    "Taipei Standard Time" = "Asia/Taipei"
    "Ulaanbaatar Standard Time" = "Asia/Ulaanbaatar"
    "North Asia East Standard Time" = "Asia/Irkutsk"
    "Korea Standard Time" = "Asia/Seoul"
    "Yakutsk Standard Time" = "Asia/Yakutsk"
    "Cen. Australia Standard Time" = "Australia/Adelaide"
    "AUS Central Standard Time" = "Australia/Darwin"
    "E. Australia Standard Time" = "Australia/Brisbane"
    "AUS Eastern Standard Time" = "Australia/Sydney"
    "West Pacific Standard Time" = "Pacific/Port_Moresby"
    "Tasmania Standard Time" = "Australia/Hobart"
    "Vladivostok Standard Time" = "Asia/Vladivostok"
    "Lord Howe Standard Time" = "Australia/Lord_Howe"
    "New Zealand Standard Time" = "Pacific/Auckland"
    "UTC+12" = "Etc/GMT-12"
    "Fiji Standard Time" = "Pacific/Fiji"
    "Magadan Standard Time" = "Asia/Magadan"
    "Kamchatka Standard Time" = "Asia/Kamchatka"
    "Tonga Standard Time" = "Pacific/Tongatapu"
}

$winTZ = (Get-TimeZone).Id
$ianaTZ = $windowsToIanaMap[$winTZ]
if (-not $ianaTZ) {
    Write-Host "Warning: Windows timezone '$winTZ' not mapped to IANA timezone. Using UTC."
    $ianaTZ = "UTC"
}

docker container rm kin-bsky -f
docker build -t kin-bsky .
docker run -d --restart unless-stopped -e TZ=$ianaTZ --name kin-bsky kin-bsky

